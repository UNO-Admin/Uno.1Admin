{"ast":null,"code":"import _objectSpread from\"C:/Development/11312/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Development/11312/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classNames from\"classnames\";import{nanoid}from\"nanoid\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{selectObjectsIds,selectObjectsIsLoading}from\"../../store/Objects/selectors\";import{getObjects}from\"../../store/Objects/Thunks/getObjects\";import styles from\"./styles.module.css\";import{Object}from\"../Object/Object\";import{selectUserId}from\"../../store/Auth/selectors\";import{getPackagePrices}from\"../../store/ObjectPrices/Thunks/getPackagePrices\";import{getFransheses}from\"../../store/Franshises/Thunks/getFransheses\";import{ButtonBar}from\"../ButtonsBar/ButtonsBar\";import{AddObjectPopup}from\"../AddObjectPopup/AddObjectPopup\";import{SearchBar}from\"../SearchBar/SearchBar\";import{ObjectDataContainer}from\"../../Containers/ObjectDataContainer\";import{useSingleEffect}from\"../../hooks/UseSingleEffect\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Objects=function Objects(){var dispatch=useDispatch();var isLoading=useSelector(function(state){return selectObjectsIsLoading(state);});var objectsIds=useSelector(function(state){return selectObjectsIds(state);});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRowSelected=_useState2[0],setIsRowSelected=_useState2[1];var _useState3=useState({name:\"\",city:\"\"}),_useState4=_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];var setName=function setName(e){setFilter(_objectSpread(_objectSpread({},filter),{},{name:e.target.value}));};var setCity=function setCity(e){setFilter(_objectSpread(_objectSpread({},filter),{},{city:e.target.value}));};var userId=useSelector(function(state){return selectUserId(state);});var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPopupOpened=_useState6[0],setIsPopupOpened=_useState6[1];useSingleEffect(function(){if(true){dispatch(getObjects({userId:userId}));dispatch(getPackagePrices);}},[dispatch]);useSingleEffect(function(){dispatch(getFransheses({userId:userId}));},[]);var togglePopupOpened=function togglePopupOpened(){setIsPopupOpened(!isPopupOpened);};if(localStorage.userId){userId=localStorage.userId;}var headers=[\"ID\",\"Название\",\"Город\",\"Телефон\",\"Дата\",\"Партнер\",\"Баланс\"];if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.objects_wrapper,children:[/*#__PURE__*/_jsxs(\"table\",{className:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{className:styles.table_header,children:/*#__PURE__*/_jsx(\"tr\",{className:styles.table_row,children:headers===null||headers===void 0?void 0:headers.map(function(el){return/*#__PURE__*/_jsx(\"th\",{className:classNames(styles.table_cell,styles.table_cell__header),children:el===\"Название\"?/*#__PURE__*/_jsx(SearchBar,{filter:filter.name,handleSearch:setName,placeholder:el}):el===\"Город\"?/*#__PURE__*/_jsx(SearchBar,{filter:filter.city,handleSearch:setCity,placeholder:el}):el},nanoid());})})}),/*#__PURE__*/_jsx(\"tbody\",{className:styles.table_content,children:objectsIds===null||objectsIds===void 0?void 0:objectsIds.map(function(id){return/*#__PURE__*/_jsx(ObjectDataContainer,{id:id,filter:filter,onclick:setIsRowSelected},id);})})]}),isRowSelected&&/*#__PURE__*/_jsx(Object,{toggleObject:setIsRowSelected,id:isRowSelected}),/*#__PURE__*/_jsx(ButtonBar,{onClicks:[togglePopupOpened]}),isPopupOpened&&/*#__PURE__*/_jsx(AddObjectPopup,{togglePopup:togglePopupOpened})]});};","map":{"version":3,"names":["classNames","nanoid","useState","useDispatch","useSelector","selectObjectsIds","selectObjectsIsLoading","getObjects","styles","Object","selectUserId","getPackagePrices","getFransheses","ButtonBar","AddObjectPopup","SearchBar","ObjectDataContainer","useSingleEffect","Objects","dispatch","isLoading","state","objectsIds","isRowSelected","setIsRowSelected","name","city","filter","setFilter","setName","e","target","value","setCity","userId","isPopupOpened","setIsPopupOpened","togglePopupOpened","localStorage","headers","objects_wrapper","table","table_header","table_row","map","el","table_cell","table_cell__header","table_content","id"],"sources":["C:/Development/11312/client/src/Components/Objects/Objects.js"],"sourcesContent":["import classNames from \"classnames\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectObjectsIds,\r\n  selectObjectsIsLoading,\r\n} from \"../../store/Objects/selectors\";\r\nimport { getObjects } from \"../../store/Objects/Thunks/getObjects\";\r\nimport styles from \"./styles.module.css\";\r\nimport { Object } from \"../Object/Object\";\r\nimport { selectUserId } from \"../../store/Auth/selectors\";\r\nimport { getPackagePrices } from \"../../store/ObjectPrices/Thunks/getPackagePrices\";\r\nimport { getFransheses } from \"../../store/Franshises/Thunks/getFransheses\";\r\nimport { ButtonBar } from \"../ButtonsBar/ButtonsBar\";\r\nimport { AddObjectPopup } from \"../AddObjectPopup/AddObjectPopup\";\r\nimport { SearchBar } from \"../SearchBar/SearchBar\";\r\nimport { ObjectDataContainer } from \"../../Containers/ObjectDataContainer\";\r\nimport { useSingleEffect } from \"../../hooks/UseSingleEffect\";\r\n\r\nexport const Objects = () => {\r\n  const dispatch = useDispatch();\r\n  const isLoading = useSelector((state) => selectObjectsIsLoading(state));\r\n  const objectsIds = useSelector((state) => selectObjectsIds(state));\r\n  const [isRowSelected, setIsRowSelected] = useState(false);\r\n  const [filter, setFilter] = useState({ name: \"\", city: \"\" });\r\n  const setName = (e) => {\r\n    setFilter({...filter, name: e.target.value})\r\n  }\r\n  const setCity = (e) => {\r\n    setFilter({...filter, city: e.target.value})\r\n  }\r\n  let userId = useSelector((state) => selectUserId(state));\r\n  const [isPopupOpened, setIsPopupOpened] = useState(false);\r\n  useSingleEffect(() => {\r\n    if (true) {\r\n      dispatch(getObjects({ userId }));\r\n      dispatch(getPackagePrices);\r\n    }\r\n  }, [dispatch]);\r\n  useSingleEffect(() => {\r\n    dispatch(getFransheses({ userId }));\r\n  }, []);\r\n  const togglePopupOpened = () => {\r\n    setIsPopupOpened(!isPopupOpened);\r\n  };\r\n  if (localStorage.userId) {\r\n    userId = localStorage.userId;\r\n  }\r\n\r\n  const headers = [\r\n    \"ID\",\r\n    \"Название\",\r\n    \"Город\",\r\n    \"Телефон\",\r\n    \"Дата\",\r\n    \"Партнер\",\r\n    \"Баланс\",\r\n  ];\r\n\r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n  return (\r\n    <div className={styles.objects_wrapper}>\r\n      <table className={styles.table}>\r\n        <thead className={styles.table_header}>\r\n          <tr className={styles.table_row}>\r\n            {headers?.map((el) => {\r\n              return (\r\n                <th\r\n                  key={nanoid()}\r\n                  className={classNames(\r\n                    styles.table_cell,\r\n                    styles.table_cell__header\r\n                  )}\r\n                >\r\n                  {el === \"Название\" ? (\r\n                    <SearchBar\r\n                      filter={filter.name}\r\n                      handleSearch={setName}\r\n                      placeholder={el}\r\n                    />\r\n                  ) : el === \"Город\" ?(\r\n                    <SearchBar \r\n                    filter={filter.city}\r\n                    handleSearch={setCity}\r\n                    placeholder={el}/>\r\n                  ) : (\r\n                    el\r\n                  )}\r\n                </th>\r\n              );\r\n            })}\r\n          </tr>\r\n        </thead>\r\n        <tbody className={styles.table_content}>\r\n          {objectsIds?.map((id) => (\r\n            <ObjectDataContainer\r\n              key={id}\r\n              id={id}\r\n              filter={filter}\r\n              onclick={setIsRowSelected}\r\n            />\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      {isRowSelected && (\r\n        <Object toggleObject={setIsRowSelected} id={isRowSelected} />\r\n      )}\r\n      <ButtonBar onClicks={[togglePopupOpened]} />\r\n      {isPopupOpened && <AddObjectPopup togglePopup={togglePopupOpened} />}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}