{"ast":null,"code":"import { authSliceActions } from \"..\";\nexport const authUserIfUserExist = userData => dispatch => {\n  const {\n    email,\n    password\n  } = userData;\n  const options = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json;charset=utf-8\"\n    },\n    body: JSON.stringify({\n      getAuth: `select id,name,idaccess,balance from peoples where upper(email)=upper('${email}')and pass = hash(cast('${password}' as varchar(50)));`\n    })\n  };\n  dispatch(authSliceActions.startLoadingUser());\n  fetch(\"http://localhost:4000/authUser\", options).then(res => res.json()).then(data => {\n    if (data.length === 0) {\n      dispatch(authSliceActions.errorLoading({\n        err: 'Пользователя не существует'\n      }));\n    } else {\n      dispatch(authSliceActions.login(data[0]));\n      localStorage.setItem('user', data);\n    }\n  }).catch(err => {\n    dispatch(authSliceActions.errorLoading({\n      err\n    }));\n  });\n};","map":{"version":3,"names":["authSliceActions","authUserIfUserExist","userData","dispatch","email","password","options","method","headers","body","JSON","stringify","getAuth","startLoadingUser","fetch","then","res","json","data","length","errorLoading","err","login","localStorage","setItem","catch"],"sources":["C:/Development/11312/client/src/store/Auth/Thunks/authUserIfUserExist.js"],"sourcesContent":["import { authSliceActions } from \"..\";\r\n\r\nexport const authUserIfUserExist = (userData) => (dispatch) => {\r\n  const { email, password } = userData;\r\n  const options = {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json;charset=utf-8\",\r\n    },\r\n    body: JSON.stringify({\r\n      getAuth: `select id,name,idaccess,balance from peoples where upper(email)=upper('${email}')and pass = hash(cast('${password}' as varchar(50)));`,\r\n    }),\r\n  };\r\n  dispatch(authSliceActions.startLoadingUser());\r\n\r\n  fetch(\"http://localhost:4000/authUser\", options)\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      if (data.length === 0) {\r\n        dispatch(authSliceActions.errorLoading({err: 'Пользователя не существует'}))\r\n      } else {\r\n        dispatch(authSliceActions.login(data[0]));\r\n        localStorage.setItem('user', data);\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      dispatch(authSliceActions.errorLoading({err}))\r\n    });\r\n};\r\n"],"mappings":"AAAA,SAASA,gBAAgB,QAAQ,IAAI;AAErC,OAAO,MAAMC,mBAAmB,GAAIC,QAAQ,IAAMC,QAAQ,IAAK;EAC7D,MAAM;IAAEC,KAAK;IAAEC;EAAS,CAAC,GAAGH,QAAQ;EACpC,MAAMI,OAAO,GAAG;IACdC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE;IAClB,CAAC;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;MACnBC,OAAO,EAAG,0EAAyER,KAAM,2BAA0BC,QAAS;IAC9H,CAAC;EACH,CAAC;EACDF,QAAQ,CAACH,gBAAgB,CAACa,gBAAgB,EAAE,CAAC;EAE7CC,KAAK,CAAC,gCAAgC,EAAER,OAAO,CAAC,CAC7CS,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,EAAE,CAAC,CACzBF,IAAI,CAAEG,IAAI,IAAK;IACd,IAAIA,IAAI,CAACC,MAAM,KAAK,CAAC,EAAE;MACrBhB,QAAQ,CAACH,gBAAgB,CAACoB,YAAY,CAAC;QAACC,GAAG,EAAE;MAA4B,CAAC,CAAC,CAAC;IAC9E,CAAC,MAAM;MACLlB,QAAQ,CAACH,gBAAgB,CAACsB,KAAK,CAACJ,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;MACzCK,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEN,IAAI,CAAC;IACpC;EACF,CAAC,CAAC,CACDO,KAAK,CAAEJ,GAAG,IAAK;IACdlB,QAAQ,CAACH,gBAAgB,CAACoB,YAAY,CAAC;MAACC;IAAG,CAAC,CAAC,CAAC;EAChD,CAAC,CAAC;AACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}