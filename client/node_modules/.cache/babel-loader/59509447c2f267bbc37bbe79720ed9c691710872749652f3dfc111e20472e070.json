{"ast":null,"code":"import{authSliceActions}from\"..\";export var authUserIfUserExist=function authUserIfUserExist(userData){return function(dispatch){var email=userData.email,password=userData.password;var options={method:\"POST\",headers:{\"Content-Type\":\"application/json;charset=utf-8\"},body:JSON.stringify({getAuth:\"select id,name,idaccess,balance from peoples where upper(email)=upper('\".concat(email,\"')and pass = hash(cast('\").concat(password,\"' as varchar(50)));\")})};dispatch(authSliceActions.startLoadingUser());fetch(\"http://localhost:4000/authUser\",options).then(function(res){return res.json();}).then(function(data){if(data.length===0){dispatch(authSliceActions.errorLoading({err:'Пользователя не существует'}));}else{dispatch(authSliceActions.login(data[0]));}}).catch(function(err){dispatch(authSliceActions.errorLoading({err:err}));});};};","map":{"version":3,"names":["authSliceActions","authUserIfUserExist","userData","dispatch","email","password","options","method","headers","body","JSON","stringify","getAuth","startLoadingUser","fetch","then","res","json","data","length","errorLoading","err","login","catch"],"sources":["C:/Development/11312/client/src/store/Auth/Thunks/authUserIfUserExist.js"],"sourcesContent":["import { authSliceActions } from \"..\";\r\n\r\nexport const authUserIfUserExist = (userData) => (dispatch) => {\r\n  const { email, password } = userData;\r\n  const options = {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json;charset=utf-8\",\r\n    },\r\n    body: JSON.stringify({\r\n      getAuth: `select id,name,idaccess,balance from peoples where upper(email)=upper('${email}')and pass = hash(cast('${password}' as varchar(50)));`,\r\n    }),\r\n  };\r\n  dispatch(authSliceActions.startLoadingUser());\r\n\r\n  fetch(\"http://localhost:4000/authUser\", options)\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      if (data.length === 0) {\r\n        dispatch(authSliceActions.errorLoading({err: 'Пользователя не существует'}))\r\n      } else {\r\n        dispatch(authSliceActions.login(data[0]));\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      dispatch(authSliceActions.errorLoading({err}))\r\n    });\r\n};\r\n"],"mappings":"AAAA,OAASA,gBAAgB,KAAQ,IAAI,CAErC,MAAO,IAAMC,oBAAmB,CAAG,QAAtBA,oBAAmB,CAAIC,QAAQ,QAAK,UAACC,QAAQ,CAAK,CAC7D,GAAQC,MAAK,CAAeF,QAAQ,CAA5BE,KAAK,CAAEC,QAAQ,CAAKH,QAAQ,CAArBG,QAAQ,CACvB,GAAMC,QAAO,CAAG,CACdC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,gCAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CACnBC,OAAO,kFAA4ER,KAAK,oCAA2BC,QAAQ,uBAC7H,CAAC,CACH,CAAC,CACDF,QAAQ,CAACH,gBAAgB,CAACa,gBAAgB,EAAE,CAAC,CAE7CC,KAAK,CAAC,gCAAgC,CAAER,OAAO,CAAC,CAC7CS,IAAI,CAAC,SAACC,GAAG,QAAKA,IAAG,CAACC,IAAI,EAAE,GAAC,CACzBF,IAAI,CAAC,SAACG,IAAI,CAAK,CACd,GAAIA,IAAI,CAACC,MAAM,GAAK,CAAC,CAAE,CACrBhB,QAAQ,CAACH,gBAAgB,CAACoB,YAAY,CAAC,CAACC,GAAG,CAAE,4BAA4B,CAAC,CAAC,CAAC,CAC9E,CAAC,IAAM,CACLlB,QAAQ,CAACH,gBAAgB,CAACsB,KAAK,CAACJ,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAC3C,CACF,CAAC,CAAC,CACDK,KAAK,CAAC,SAACF,GAAG,CAAK,CACdlB,QAAQ,CAACH,gBAAgB,CAACoB,YAAY,CAAC,CAACC,GAAG,CAAHA,GAAG,CAAC,CAAC,CAAC,CAChD,CAAC,CAAC,CACN,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}