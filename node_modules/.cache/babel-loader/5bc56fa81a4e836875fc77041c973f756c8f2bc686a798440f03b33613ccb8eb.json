{"ast":null,"code":"import _defineProperty from\"C:/Development/11312/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Development/11312/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Development/11312/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import{setNewPassword}from\"../../store/Auth/Thunks/setNewPassword\";import styles from\"./styles.module.css\";import{useDispatch,useSelector}from\"react-redux\";import{useEffect}from\"react\";import{selectUserPasswordError,selectUserPasswordSuccess}from\"../../store/Auth/selectors\";import classNames from\"classnames\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Profile=function Profile(){var dispatch=useDispatch();var initialValidate={validate:true,errorMessage:' '};var _useState=useState(initialValidate),_useState2=_slicedToArray(_useState,2),validate=_useState2[0],setValidate=_useState2[1];var serverErrorMessage=useSelector(function(state){return selectUserPasswordError(state);});var mess=useSelector(function(state){return selectUserPasswordSuccess(state);});useEffect(function(){if(validate.errorMessage<5&&form.newPassword.length>=6){setValidate(initialValidate);dispatch(setNewPassword({pass:form.password,id:localStorage.userId/1,newPass:form.newPassword}));setForm({password:'',newPassword:'',repeat:''});}setValidate(_objectSpread(_objectSpread({},validate),{},{validate:true}));},[validate.errorMessage]);var _useState3=useState({password:\"\",newPassword:\"\",repeat:\"\"}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var handleValidate=function handleValidate(){var regularExpression=/^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&+=*]{6,30}$/;if(form.newPassword!==form.repeat){setValidate({validate:false,errorMessage:\"Пароли не совпадают!\"});}else if(!regularExpression.test(form.newPassword)){setValidate({validate:false,errorMessage:\"Новый пароль должен содержать латинские буквы верхнего и нижнего регистра, цифры и специальные символы и быть длинной от 6 до 30 символов\"});}else if(serverErrorMessage){setValidate({validate:false,errorMessage:serverErrorMessage});}else{setValidate(_objectSpread(_objectSpread({},validate),{},{errorMessage:'  ',mess:mess}));}};var onSubmit=function onSubmit(e){e.preventDefault();handleValidate();};return/*#__PURE__*/_jsxs(\"div\",{className:styles.profile,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:styles.form,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.input_container,children:[/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",id:\"old\",type:\"password\",className:styles.form_input,required:true,placeholder:\" \",value:form.password,onChange:function onChange(event){return setForm(_objectSpread(_objectSpread({},form),{},{password:event.target.value}));}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"old\",className:styles.form_label,children:\"\\u0421\\u0442\\u0430\\u0440\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input_container,children:[/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",id:\"newPassword\",type:\"password\",className:styles.form_input,required:true,placeholder:\" \",value:form.newPassword,onChange:function onChange(event){return setForm(_objectSpread(_objectSpread({},form),{},{newPassword:event.target.value}));}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newPassword\",className:styles.form_label,children:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input_container,children:[/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",id:\"repeat\",type:\"password\",className:styles.form_input,required:true,placeholder:\" \",value:form.repeat,onChange:function onChange(event){return setForm(_objectSpread(_objectSpread({},form),{},{repeat:event.target.value}));}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"repeat\",className:styles.form_label,children:\"\\u041F\\u043E\\u0432\\u0442\\u043E\\u0440\\u0438\\u0442\\u0435 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",onClick:function onClick(e){return onSubmit(e);},className:styles.submit,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"span\",{className:classNames(styles.errorMessage,_defineProperty({},styles.successMessage,validate.mess)),children:validate.mess?mess:validate.errorMessage})]})]});};","map":{"version":3,"names":["useState","setNewPassword","styles","useDispatch","useSelector","useEffect","selectUserPasswordError","selectUserPasswordSuccess","classNames","Profile","dispatch","initialValidate","validate","errorMessage","setValidate","serverErrorMessage","state","mess","form","newPassword","length","pass","password","id","localStorage","userId","newPass","setForm","repeat","handleValidate","regularExpression","test","onSubmit","e","preventDefault","profile","title","input_container","form_input","event","target","value","form_label","submit","successMessage"],"sources":["C:/Development/11312/client/src/Components/Profile/Profile.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport { setNewPassword } from \"../../store/Auth/Thunks/setNewPassword\";\r\nimport styles from \"./styles.module.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useEffect } from \"react\";\r\nimport { selectUserPasswordError, selectUserPasswordSuccess } from \"../../store/Auth/selectors\";\r\nimport classNames from \"classnames\";\r\n\r\nexport const Profile = () => {\r\n  const dispatch = useDispatch();\r\n  const initialValidate = {\r\n    validate: true,\r\n    errorMessage: ' ',\r\n  }\r\n  const [validate, setValidate] = useState(initialValidate);\r\n  const serverErrorMessage = useSelector(state => selectUserPasswordError(state))\r\n  const mess = useSelector(state => selectUserPasswordSuccess(state))\r\n  useEffect(() => {\r\n    if (validate.errorMessage < 5 && form.newPassword.length >= 6) {\r\n      setValidate(initialValidate)\r\n      dispatch(\r\n        setNewPassword({ pass: form.password, id: localStorage.userId / 1, newPass: form.newPassword })\r\n      );\r\n      setForm({\r\n        password: '',\r\n        newPassword: '',\r\n        repeat: ''\r\n      })\r\n    }\r\n    \r\n    setValidate({...validate, validate: true})\r\n  }, [validate.errorMessage]);\r\n\r\n  const [form, setForm] = useState({\r\n    password: \"\",\r\n    newPassword: \"\",\r\n    repeat: \"\",\r\n  });\r\n\r\n  const handleValidate = () => {\r\n    const regularExpression =\r\n      /^(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&+=*]{6,30}$/;\r\n    if (form.newPassword !== form.repeat) {\r\n      setValidate({ validate: false, errorMessage: \"Пароли не совпадают!\" });\r\n    }\r\n    else if (!regularExpression.test(form.newPassword)) {\r\n      setValidate({\r\n        validate: false,\r\n        errorMessage:\r\n          \"Новый пароль должен содержать латинские буквы верхнего и нижнего регистра, цифры и специальные символы и быть длинной от 6 до 30 символов\",\r\n      });\r\n    }\r\n    else if (serverErrorMessage) {\r\n      setValidate({validate: false,\r\n      errorMessage: serverErrorMessage})\r\n    }\r\n\r\n    else {setValidate({ ...validate, errorMessage: '  ', mess})}\r\n  };\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    handleValidate();\r\n  };\r\n\r\n  return (\r\n    <div className={styles.profile}>\r\n      <h2 className={styles.title}>Сбросить пароль </h2>\r\n      <form onSubmit={onSubmit} className={styles.form}>\r\n      <div className={styles.input_container}>\r\n        <input\r\n          autoComplete=\"new-password\"\r\n          id=\"old\"\r\n          type=\"password\"\r\n          className={styles.form_input}\r\n          required\r\n          placeholder=\" \"\r\n          value={form.password}\r\n          onChange={(event) =>\r\n            setForm({ ...form, password: event.target.value })\r\n          }\r\n        />\r\n        <label htmlFor=\"old\" className={styles.form_label}>\r\n          Старый пароль\r\n        </label>\r\n      </div>\r\n      <div className={styles.input_container}>\r\n        <input\r\n          autoComplete=\"new-password\"\r\n          id=\"newPassword\"\r\n          type=\"password\"\r\n          className={styles.form_input}\r\n          required\r\n          placeholder=\" \"\r\n          value={form.newPassword}\r\n          onChange={(event) =>\r\n            setForm({ ...form, newPassword: event.target.value })\r\n          }\r\n        />\r\n        <label htmlFor=\"newPassword\" className={styles.form_label}>\r\n          Новый пароль\r\n        </label>\r\n      </div>\r\n      <div className={styles.input_container}>\r\n        <input\r\n          autoComplete=\"new-password\"\r\n          id=\"repeat\"\r\n          type=\"password\"\r\n          className={styles.form_input}\r\n          required\r\n          placeholder=\" \"\r\n          value={form.repeat}\r\n          onChange={(event) => setForm({ ...form, repeat: event.target.value })}\r\n        />\r\n        <label htmlFor=\"repeat\" className={styles.form_label}>\r\n          Повторите пароль\r\n        </label>\r\n      </div>\r\n      <button type=\"submit\" onClick={(e) => onSubmit(e)} className={styles.submit}>Сохранить</button>\r\n      <span className={classNames(styles.errorMessage, {\r\n        [styles.successMessage]: validate.mess\r\n      })}>\r\n          {validate.mess ? mess : validate.errorMessage}\r\n        </span>\r\n      </form>\r\n    </div>\r\n    \r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}