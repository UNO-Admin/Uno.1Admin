{"ast":null,"code":"import _slicedToArray from\"C:/Development/11312/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classNames from\"classnames\";import{nanoid}from\"nanoid\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{selectObjectsIds,selectObjectsIsLoading}from\"../../store/Objects/selectors\";import{getObjects}from\"../../store/Objects/Thunks/getObjects\";import styles from\"./styles.module.css\";import{Object}from\"../Object/Object\";import{selectUserId}from\"../../store/Auth/selectors\";import{UserData}from\"../UserData/UserData\";import{getPackagePrices}from\"../../store/ObjectPrices/Thunks/getPackagePrices\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Objects=function Objects(){var dispatch=useDispatch();var isLoading=useSelector(function(state){return selectObjectsIsLoading(state);});var objectsIds=useSelector(function(state){return selectObjectsIds(state);});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRowSelected=_useState2[0],setIsRowSelected=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];var userId=useSelector(function(state){return selectUserId(state);});if(localStorage.userId){userId=localStorage.userId;}useEffect(function(){dispatch(getObjects({userId:userId}));dispatch(getPackagePrices);},[dispatch,userId]);var handleSearch=function handleSearch(event){setFilter(event.target.value);};var headers=[\"ID\",\"Название\",\"Город\",\"Телефон\",\"Дата\",\"Партнер\",\"Баланс\"];var userStyles={cell:styles.table_cell,cell_num:classNames(styles.table_cell,styles.table_cell__num),row:styles.table_row,cell__balance:styles.table_cell__balance,cell_num_red:classNames(styles.table_cell,styles.table_cell__num,styles.red),cell_num_yellow:classNames(styles.table_cell,styles.table_cell__num,styles.yellow),cell_num_green:classNames(styles.table_cell,styles.table_cell__num,styles.green)};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(\"div\",{className:styles.objects_wrapper,children:/*#__PURE__*/_jsxs(\"table\",{className:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{className:styles.table_header,children:/*#__PURE__*/_jsx(\"tr\",{className:styles.table_row,children:headers===null||headers===void 0?void 0:headers.map(function(el){return/*#__PURE__*/_jsx(\"th\",{className:classNames(styles.table_cell,styles.table_cell__header),children:el===\"Название\"?/*#__PURE__*/_jsx(\"input\",{id:\"search\",type:\"text\",value:filter,placeholder:el,autoFocus:true,onChange:handleSearch,className:styles.search_input}):el},nanoid());})})}),/*#__PURE__*/_jsx(\"tbody\",{className:styles.table_content,children:objectsIds===null||objectsIds===void 0?void 0:objectsIds.map(function(id){return/*#__PURE__*/_jsx(UserData,{styles:userStyles,objectId:id,filter:filter,onclick:setIsRowSelected},id);})}),isRowSelected&&/*#__PURE__*/_jsx(Object,{toggleObject:setIsRowSelected,id:isRowSelected})]})});};","map":{"version":3,"names":["classNames","nanoid","useEffect","useState","useDispatch","useSelector","selectObjectsIds","selectObjectsIsLoading","getObjects","styles","Object","selectUserId","UserData","getPackagePrices","Objects","dispatch","isLoading","state","objectsIds","isRowSelected","setIsRowSelected","filter","setFilter","userId","localStorage","handleSearch","event","target","value","headers","userStyles","cell","table_cell","cell_num","table_cell__num","row","table_row","cell__balance","table_cell__balance","cell_num_red","red","cell_num_yellow","yellow","cell_num_green","green","objects_wrapper","table","table_header","map","el","table_cell__header","search_input","table_content","id"],"sources":["C:/Development/11312/client/src/Components/Objects/Objects.js"],"sourcesContent":["import classNames from \"classnames\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectObjectsIds,\r\n  selectObjectsIsLoading,\r\n} from \"../../store/Objects/selectors\";\r\nimport { getObjects } from \"../../store/Objects/Thunks/getObjects\";\r\nimport styles from \"./styles.module.css\";\r\nimport { Object } from \"../Object/Object\";\r\nimport { selectUserId } from \"../../store/Auth/selectors\";\r\nimport { UserData } from \"../UserData/UserData\";\r\nimport { getPackagePrices } from \"../../store/ObjectPrices/Thunks/getPackagePrices\";\r\n\r\nexport const Objects = () => {\r\n  const dispatch = useDispatch();\r\n  const isLoading = useSelector((state) => selectObjectsIsLoading(state));\r\n  const objectsIds = useSelector((state) => selectObjectsIds(state));\r\n  const [isRowSelected, setIsRowSelected] = useState(false);\r\n  const [filter, setFilter] = useState(\"\");\r\n  let userId = useSelector((state) => selectUserId(state));\r\n  if (localStorage.userId) {\r\n    userId = localStorage.userId;\r\n  }\r\n  useEffect(() => {\r\n    dispatch(getObjects({ userId }));\r\n    dispatch(getPackagePrices)\r\n  }, [dispatch, userId]);\r\n  const handleSearch = (event) => {\r\n    setFilter(event.target.value);\r\n  };\r\n\r\n  const headers = [\r\n    \"ID\",\r\n    \"Название\",\r\n    \"Город\",\r\n    \"Телефон\",\r\n    \"Дата\",\r\n    \"Партнер\",\r\n    \"Баланс\",\r\n  ];\r\n  const userStyles = {\r\n    cell: styles.table_cell,\r\n    cell_num: classNames(styles.table_cell, styles.table_cell__num),\r\n    row: styles.table_row,\r\n    cell__balance: styles.table_cell__balance,\r\n    cell_num_red: classNames(styles.table_cell, styles.table_cell__num, styles.red),\r\n    cell_num_yellow: classNames(styles.table_cell, styles.table_cell__num, styles.yellow),\r\n    cell_num_green: classNames(styles.table_cell, styles.table_cell__num, styles.green)\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n  return (\r\n    <div className={styles.objects_wrapper}>\r\n      <table className={styles.table}>\r\n        <thead className={styles.table_header}>\r\n          <tr className={styles.table_row}>\r\n            {headers?.map((el) => {\r\n              return (\r\n                <th\r\n                  key={nanoid()}\r\n                  className={classNames(\r\n                    styles.table_cell,\r\n                    styles.table_cell__header\r\n                  )}\r\n                >\r\n                  {el === \"Название\" ? (\r\n                    <input\r\n                      id=\"search\"\r\n                      type=\"text\"\r\n                      value={filter}\r\n                      placeholder={el}\r\n                      autoFocus={true}\r\n                      onChange={handleSearch}\r\n                      className={styles.search_input}\r\n                    />\r\n                  ) : (\r\n                    el\r\n                  )}\r\n                </th>\r\n              );\r\n            })}\r\n          </tr>\r\n        </thead>\r\n        <tbody className={styles.table_content}>\r\n          {objectsIds?.map((id) => (\r\n            <UserData\r\n            key={id}\r\n              styles={userStyles}\r\n              objectId={id}\r\n              filter={filter}\r\n              onclick={setIsRowSelected}\r\n            />\r\n          ))}\r\n        </tbody>\r\n        {isRowSelected && (\r\n          <Object toggleObject={setIsRowSelected} id={isRowSelected} />\r\n        )}\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}