{"ast":null,"code":"import _slicedToArray from\"C:/Development/11312/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classNames from\"classnames\";import styles from\"./styles.module.css\";import{nanoid}from\"nanoid\";import{AddPopup}from\"../AddPopup/AddPopup\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{selectUsersIds,selectUsersIsLoading}from\"../../store/Users/selectors\";import{loadUsers}from\"../../store/Users/Thunks/loadUsers\";import{DeletePopup}from\"../DeletePopup/DeletePopup\";import{EditPopup}from\"../EditPopup/EditPopup\";import{ButtonBar}from\"../ButtonsBar/ButtonsBar\";import{HEADERS}from\"../../constants/Fixtires\";import{UserDataContainer}from\"../../Containers/UserDataContainer\";import{useSingleEffect}from\"../../hooks/UseSingleEffect\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Users=function Users(){var dispatch=useDispatch();var isLoading=useSelector(function(state){return selectUsersIsLoading(state);});useSingleEffect(function(){if(!usersIds){dispatch(loadUsers({userId:userId}));setIsRowSelected(false);}},[]);var usersIds=useSelector(function(state){return selectUsersIds(state);});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isPopupOpened=_useState2[0],setIsPopupOpened=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isRowSelected=_useState4[0],setIsRowSelected=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isEditPopupOpened=_useState6[0],setIsEditPopupOpened=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isDeletePopupOpened=_useState8[0],setIsDeletePopupOpened=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),selectedRow=_useState10[0],setSelectedRow=_useState10[1];var userId=localStorage.userId/1;var toggleAddPopup=function toggleAddPopup(){setIsPopupOpened(!isPopupOpened);};var resetSelectedRow=function resetSelectedRow(){setSelectedRow(false);setIsRowSelected(false);};var toggleDeletePopup=function toggleDeletePopup(){setIsDeletePopupOpened(!isDeletePopupOpened);};var toggleEditPopup=function toggleEditPopup(){setIsEditPopupOpened(!isEditPopupOpened);};var toggleSelectedRow=function toggleSelectedRow(el){if(userId/1!==el){if(!!el){if(selectedRow===el){resetSelectedRow();}else{setIsRowSelected(true);setSelectedRow(el);}}else{resetSelectedRow();}}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.users_wrapper,children:[true?/*#__PURE__*/_jsxs(\"table\",{className:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{className:styles.table_header,children:/*#__PURE__*/_jsx(\"tr\",{className:styles.table_row,children:HEADERS===null||HEADERS===void 0?void 0:HEADERS.map(function(el){return/*#__PURE__*/_jsx(\"th\",{className:classNames(styles.table_cell,styles.table_cell__header),children:el},nanoid());})})}),/*#__PURE__*/_jsx(\"tbody\",{className:styles.table_content,children:usersIds===null||usersIds===void 0?void 0:usersIds.map(function(el){return/*#__PURE__*/_jsx(UserDataContainer,{onclick:toggleSelectedRow,id:el,selectedRow:selectedRow},nanoid());})})]}):/*#__PURE__*/_jsx(\"div\",{className:styles.emptyData,children:\"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043E\\u0442\\u0441\\u0443\\u0442\\u0441\\u0442\\u0432\\u0443\\u044E\\u0442\"}),/*#__PURE__*/_jsx(ButtonBar,{onClicks:[toggleAddPopup,toggleEditPopup,toggleDeletePopup],disabled:!isRowSelected}),isPopupOpened&&/*#__PURE__*/_jsx(AddPopup,{toggleAddPopup:toggleAddPopup}),isDeletePopupOpened&&/*#__PURE__*/_jsx(DeletePopup,{id:selectedRow,toggleDeletePopup:toggleDeletePopup,resetSelectedRow:resetSelectedRow}),isEditPopupOpened&&/*#__PURE__*/_jsx(EditPopup,{id:selectedRow,togglePopup:toggleEditPopup,resetSelectedRow:resetSelectedRow})]});};","map":{"version":3,"names":["classNames","styles","nanoid","AddPopup","useState","useDispatch","useSelector","selectUsersIds","selectUsersIsLoading","loadUsers","DeletePopup","EditPopup","ButtonBar","HEADERS","UserDataContainer","useSingleEffect","Users","dispatch","isLoading","state","usersIds","userId","setIsRowSelected","isPopupOpened","setIsPopupOpened","isRowSelected","isEditPopupOpened","setIsEditPopupOpened","isDeletePopupOpened","setIsDeletePopupOpened","selectedRow","setSelectedRow","localStorage","toggleAddPopup","resetSelectedRow","toggleDeletePopup","toggleEditPopup","toggleSelectedRow","el","users_wrapper","table","table_header","table_row","map","table_cell","table_cell__header","table_content","emptyData"],"sources":["C:/Development/11312/client/src/Components/Users/Users.jsx"],"sourcesContent":["import classNames from \"classnames\";\r\nimport styles from \"./styles.module.css\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { AddPopup } from \"../AddPopup/AddPopup\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectUsersIds,\r\n  selectUsersIsLoading,\r\n} from \"../../store/Users/selectors\";\r\nimport { loadUsers } from \"../../store/Users/Thunks/loadUsers\";\r\nimport { DeletePopup } from \"../DeletePopup/DeletePopup\";\r\nimport { EditPopup } from \"../EditPopup/EditPopup\";\r\nimport { ButtonBar } from \"../ButtonsBar/ButtonsBar\";\r\nimport { HEADERS } from \"../../constants/Fixtires\";\r\nimport { UserDataContainer } from \"../../Containers/UserDataContainer\";\r\nimport { useSingleEffect } from \"../../hooks/UseSingleEffect\";\r\n\r\nexport const Users = () => {\r\n  const dispatch = useDispatch();\r\n  const isLoading = useSelector((state) => selectUsersIsLoading(state));\r\n  useSingleEffect(() => {\r\n    if (!usersIds) {\r\n      dispatch(loadUsers({ userId }));\r\n      setIsRowSelected(false);\r\n    }\r\n  }, []);\r\n  const usersIds = useSelector((state) => selectUsersIds(state));\r\n  const [isPopupOpened, setIsPopupOpened] = useState(false);\r\n  const [isRowSelected, setIsRowSelected] = useState(false);\r\n  const [isEditPopupOpened, setIsEditPopupOpened] = useState(false);\r\n  const [isDeletePopupOpened, setIsDeletePopupOpened] = useState(false);\r\n  const [selectedRow, setSelectedRow] = useState(false);\r\n\r\n  const userId = localStorage.userId / 1;\r\n\r\n  const toggleAddPopup = () => {\r\n    setIsPopupOpened(!isPopupOpened);\r\n  };\r\n  const resetSelectedRow = () => {\r\n    setSelectedRow(false);\r\n    setIsRowSelected(false);\r\n  };\r\n  const toggleDeletePopup = () => {\r\n    setIsDeletePopupOpened(!isDeletePopupOpened);\r\n  };\r\n\r\n  const toggleEditPopup = () => {\r\n    setIsEditPopupOpened(!isEditPopupOpened);\r\n  };\r\n\r\n  const toggleSelectedRow = (el) => {\r\n    if (userId / 1 !== el) {\r\n      if (!!el) {\r\n        if (selectedRow === el) {\r\n          resetSelectedRow();\r\n        } else {\r\n          setIsRowSelected(true);\r\n          setSelectedRow(el);\r\n        }\r\n      } else {\r\n        resetSelectedRow();\r\n      }\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.users_wrapper}>\r\n      {true ? (\r\n        <table className={styles.table}>\r\n          <thead className={styles.table_header}>\r\n            <tr className={styles.table_row}>\r\n              {HEADERS?.map((el) => {\r\n                return (\r\n                  <th\r\n                    key={nanoid()}\r\n                    className={classNames(\r\n                      styles.table_cell,\r\n                      styles.table_cell__header\r\n                    )}\r\n                  >\r\n                    {el}\r\n                  </th>\r\n                );\r\n              })}\r\n            </tr>\r\n          </thead>\r\n          <tbody className={styles.table_content}>\r\n            {usersIds?.map((el) => {\r\n              return (\r\n                <UserDataContainer\r\n                  onclick={toggleSelectedRow}\r\n                  id={el}\r\n                  selectedRow={selectedRow}\r\n                  key={nanoid()}\r\n                />\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      ) : (\r\n        <div className={styles.emptyData}>Данные отсутствуют</div>\r\n      )}\r\n\r\n      <ButtonBar\r\n        onClicks={[toggleAddPopup, toggleEditPopup, toggleDeletePopup]}\r\n        disabled={!isRowSelected}\r\n      />\r\n      {isPopupOpened && <AddPopup toggleAddPopup={toggleAddPopup} />}\r\n      {isDeletePopupOpened && (\r\n        <DeletePopup\r\n          id={selectedRow}\r\n          toggleDeletePopup={toggleDeletePopup}\r\n          resetSelectedRow={resetSelectedRow}\r\n        />\r\n      )}\r\n      {isEditPopupOpened && (\r\n        <EditPopup\r\n          id={selectedRow}\r\n          togglePopup={toggleEditPopup}\r\n          resetSelectedRow={resetSelectedRow}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}