{"ast":null,"code":"import _objectSpread from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classNames from\"classnames\";import{nanoid}from\"nanoid\";import{useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{selectObjectsIds,selectObjectsIsLoading}from\"../../store/Objects/selectors\";import{getObjects}from\"../../store/Objects/Thunks/getObjects\";import styles from\"./styles.module.css\";import{Object}from\"../Object/Object\";import{selectUserId}from\"../../store/Auth/selectors\";import{getPackagePrices}from\"../../store/ObjectPrices/Thunks/getPackagePrices\";import{getFransheses}from\"../../store/Franshises/Thunks/getFransheses\";import{ButtonBar}from\"../ButtonsBar/ButtonsBar\";import{AddObjectForm}from\"../AddObjectForm/AddObjectForm\";import{SearchBar}from\"../SearchBar/SearchBar\";import{ObjectDataContainer}from\"../../Containers/ObjectDataContainer/ObjectDataContainer\";import{useSingleEffect}from\"../../hooks/UseSingleEffect\";import{PopupContainer}from\"../../Containers/PopupContainer/PopupContainer\";import{OBJECT_HEADERS}from\"../../constants/Fixtires\";import{Table}from\"../Table/Table\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Objects=function Objects(){var dispatch=useDispatch();var isLoading=useSelector(function(state){return selectObjectsIsLoading(state);});var objectsIds=useSelector(function(state){return selectObjectsIds(state);});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRowSelected=_useState2[0],setIsRowSelected=_useState2[1];var _useState3=useState({name:\"\",city:\"\"}),_useState4=_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];var setName=function setName(e){setFilter(_objectSpread(_objectSpread({},filter),{},{name:e.target.value}));};var userId=useSelector(function(state){return selectUserId(state);});var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPopupOpened=_useState6[0],setIsPopupOpened=_useState6[1];useSingleEffect(function(){dispatch(getObjects({userId:userId}));dispatch(getPackagePrices);dispatch(getFransheses({userId:userId}));},[dispatch]);var togglePopup=function togglePopup(){setIsPopupOpened(!isPopupOpened);};if(localStorage.userId){userId=localStorage.userId;}if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.objects_wrapper,children:[!isRowSelected&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Table,{children:[OBJECT_HEADERS.map(function(el){return/*#__PURE__*/_jsx(\"th\",{className:classNames(styles.table_cell,styles.table_cell__header),children:el===\"Название\"?/*#__PURE__*/_jsx(SearchBar,{filter:filter.name,handleSearch:setName,placeholder:el}):el},nanoid());}),objectsIds===null||objectsIds===void 0?void 0:objectsIds.map(function(id){return/*#__PURE__*/_jsx(ObjectDataContainer,{id:id,filter:filter,onclick:setIsRowSelected},id);})]}),/*#__PURE__*/_jsx(ButtonBar,{onClicks:[togglePopup]})]}),isRowSelected&&/*#__PURE__*/_jsx(Object,{toggleObject:setIsRowSelected,id:isRowSelected}),isPopupOpened&&/*#__PURE__*/_jsx(PopupContainer,{togglePopup:togglePopup,children:/*#__PURE__*/_jsx(AddObjectForm,{togglePopup:togglePopup})})]});};","map":{"version":3,"names":["classNames","nanoid","useState","useDispatch","useSelector","selectObjectsIds","selectObjectsIsLoading","getObjects","styles","Object","selectUserId","getPackagePrices","getFransheses","ButtonBar","AddObjectForm","SearchBar","ObjectDataContainer","useSingleEffect","PopupContainer","OBJECT_HEADERS","Table","Objects","dispatch","isLoading","state","objectsIds","isRowSelected","setIsRowSelected","name","city","filter","setFilter","setName","e","target","value","userId","isPopupOpened","setIsPopupOpened","togglePopup","localStorage","objects_wrapper","map","el","table_cell","table_cell__header","id"],"sources":["D:/dev/uno/src/Components/Objects/Objects.js"],"sourcesContent":["import classNames from \"classnames\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectObjectsIds,\r\n  selectObjectsIsLoading,\r\n} from \"../../store/Objects/selectors\";\r\nimport { getObjects } from \"../../store/Objects/Thunks/getObjects\";\r\nimport styles from \"./styles.module.css\";\r\nimport { Object } from \"../Object/Object\";\r\nimport { selectUserId } from \"../../store/Auth/selectors\";\r\nimport { getPackagePrices } from \"../../store/ObjectPrices/Thunks/getPackagePrices\";\r\nimport { getFransheses } from \"../../store/Franshises/Thunks/getFransheses\";\r\nimport { ButtonBar } from \"../ButtonsBar/ButtonsBar\";\r\nimport { AddObjectForm } from \"../AddObjectForm/AddObjectForm\";\r\nimport { SearchBar } from \"../SearchBar/SearchBar\";\r\nimport { ObjectDataContainer } from \"../../Containers/ObjectDataContainer/ObjectDataContainer\";\r\nimport { useSingleEffect } from \"../../hooks/UseSingleEffect\";\r\nimport { PopupContainer } from \"../../Containers/PopupContainer/PopupContainer\";\r\nimport { OBJECT_HEADERS } from \"../../constants/Fixtires\";\r\nimport { Table } from \"../Table/Table\";\r\n\r\nexport const Objects = () => {\r\n  const dispatch = useDispatch();\r\n  const isLoading = useSelector((state) => selectObjectsIsLoading(state));\r\n  const objectsIds = useSelector((state) => selectObjectsIds(state));\r\n  const [isRowSelected, setIsRowSelected] = useState(false);\r\n  const [filter, setFilter] = useState({ name: \"\", city: \"\" });\r\n  const setName = (e) => {\r\n    setFilter({ ...filter, name: e.target.value });\r\n  };\r\n  let userId = useSelector((state) => selectUserId(state));\r\n  const [isPopupOpened, setIsPopupOpened] = useState(false);\r\n  useSingleEffect(() => {\r\n    dispatch(getObjects({ userId }));\r\n    dispatch(getPackagePrices);\r\n    dispatch(getFransheses({ userId }));\r\n  }, [dispatch]);\r\n  const togglePopup = () => {\r\n    setIsPopupOpened(!isPopupOpened);\r\n  };\r\n  if (localStorage.userId) {\r\n    userId = localStorage.userId;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n  return (\r\n    <div className={styles.objects_wrapper}>\r\n      {!isRowSelected && (\r\n        <>\r\n          <Table>\r\n            {OBJECT_HEADERS.map((el) => {\r\n              return (\r\n                <th\r\n                  key={nanoid()}\r\n                  className={classNames(\r\n                    styles.table_cell,\r\n                    styles.table_cell__header\r\n                  )}>\r\n                  {el === \"Название\" ? (\r\n                    <SearchBar\r\n                      filter={filter.name}\r\n                      handleSearch={setName}\r\n                      placeholder={el}\r\n                    />\r\n                  ) : (\r\n                    el\r\n                  )}\r\n                </th>\r\n              );\r\n            })}\r\n            {objectsIds?.map((id) => (\r\n              <ObjectDataContainer\r\n                key={id}\r\n                id={id}\r\n                filter={filter}\r\n                onclick={setIsRowSelected}\r\n              />\r\n            ))}\r\n          </Table>\r\n          <ButtonBar onClicks={[togglePopup]} />\r\n        </>\r\n      )}\r\n      {isRowSelected && (\r\n        <Object\r\n          toggleObject={setIsRowSelected}\r\n          id={isRowSelected}\r\n        />\r\n      )}\r\n\r\n      {isPopupOpened && (\r\n        <PopupContainer togglePopup={togglePopup}>\r\n          <AddObjectForm togglePopup={togglePopup} />\r\n        </PopupContainer>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}