{"ast":null,"code":"import _objectSpread from\"C:/Development/11312/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Development/11312/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classNames from\"classnames\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{selectFranshisesIds}from\"../../store/Franshises/selectors\";import{addObject}from\"../../store/Objects/Thunks/addObject\";import{Option}from\"../Option/Option\";import styles from\"./styles.module.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var AddObjectPopup=function AddObjectPopup(_ref){var togglePopup=_ref.togglePopup;var dispatch=useDispatch();var initialValidate={validate:undefined,errorMessage:' '};var franshisesIds=useSelector(function(state){return selectFranshisesIds(state);});var _useState=useState(initialValidate),_useState2=_slicedToArray(_useState,2),validate=_useState2[0],setValidate=_useState2[1];useEffect(function(){if(validate.errorMessage.length<5&&form.phone.length>7){dispatch(addObject(_objectSpread(_objectSpread({},form),{},{userId:userId})));togglePopup();}},[validate.errorMessage]);var _useState3=useState({name:'',idFran:'',orgOwner:'',phone:'',worker:''}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var userId=localStorage.userId;var handleValidate=function handleValidate(){if(!form.name.length||!form.idFran||!form.orgOwner.length||!form.phone.length||!form.worker.length){setValidate({errorMessage:'error message',isValid:false});}else setValidate({isValid:true,errorMessage:'   '});return validate.isValid;};var onSubmit=function onSubmit(event){event.preventDefault();handleValidate();};return/*#__PURE__*/_jsx(\"div\",{className:styles.popup_wrapper,children:/*#__PURE__*/_jsxs(\"form\",{className:styles.form,onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{className:styles.title,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043E\\u0431\\u044A\\u0435\\u043A\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:classNames(styles.button,styles.popup_closeButton),onClick:function onClick(){return togglePopup();}}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input_container,children:[/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",id:\"name\",type:\"text\",className:styles.form_input,required:true,placeholder:\" \",value:form.name,onChange:function onChange(event){return setForm(_objectSpread(_objectSpread({},form),{},{name:event.target.value}));}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",className:styles.form_label,children:\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input_container,children:[/*#__PURE__*/_jsx(\"select\",{size:1,defaultValue:1,id:\"idFran\",className:styles.form_input,required:true,placeholder:\" \",onChange:function onChange(event){return setForm(_objectSpread(_objectSpread({},form),{},{idFran:event.target.value}));},children:franshisesIds.map(function(id){return/*#__PURE__*/_jsx(Option,{idFran:id,form:form,setForm:setForm},id);})}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"idFran\",className:styles.form_label__select,children:\"\\u0424\\u0440\\u0430\\u043D\\u0448\\u0438\\u0437\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input_container,children:[/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",id:\"orgOwner\",type:\"text\",className:styles.form_input,required:true,placeholder:\" \",value:form.orgOwner,onChange:function onChange(event){return setForm(_objectSpread(_objectSpread({},form),{},{orgOwner:event.target.value}));}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"orgOwner\",className:styles.form_label,children:\"\\u0418\\u043C\\u044F \\u0432\\u043B\\u0430\\u0434\\u0435\\u043B\\u044C\\u0446\\u0430\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input_container,children:[/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",id:\"phone\",type:\"text\",className:styles.form_input,required:true,placeholder:\" \",value:form.phone,onChange:function onChange(event){return setForm(_objectSpread(_objectSpread({},form),{},{phone:event.target.value}));}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",className:styles.form_label,children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.input_container,children:[/*#__PURE__*/_jsx(\"input\",{autoComplete:\"new-password\",id:\"worker\",type:\"text\",className:styles.form_input,required:true,placeholder:\" \",value:form.worker,onChange:function onChange(event){return setForm(_objectSpread(_objectSpread({},form),{},{worker:event.target.value}));}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"worker\",className:styles.form_label,children:\"\\u0421\\u043F\\u0435\\u0446\\u0438\\u0430\\u043B\\u0438\\u0441\\u0442\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:classNames(styles.button,styles.form_submit),children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043E\\u0431\\u044A\\u0435\\u043A\\u0442\"})]})});};","map":{"version":3,"names":["classNames","useEffect","useState","useDispatch","useSelector","selectFranshisesIds","addObject","Option","styles","AddObjectPopup","togglePopup","dispatch","initialValidate","validate","undefined","errorMessage","franshisesIds","state","setValidate","length","form","phone","userId","name","idFran","orgOwner","worker","setForm","localStorage","handleValidate","isValid","onSubmit","event","preventDefault","popup_wrapper","title","button","popup_closeButton","input_container","form_input","target","value","form_label","map","id","form_label__select","form_submit"],"sources":["C:/Development/11312/client/src/Components/AddObjectPopup/AddObjectPopup.jsx"],"sourcesContent":["import classNames from \"classnames\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { selectFranshisesIds } from \"../../store/Franshises/selectors\";\r\nimport { addObject } from \"../../store/Objects/Thunks/addObject\";\r\nimport { Option } from \"../Option/Option\";\r\nimport styles from \"./styles.module.css\";\r\n\r\nexport const AddObjectPopup = ({ togglePopup }) => {\r\n  const dispatch = useDispatch();  \r\n  const initialValidate = {\r\n    validate: undefined,\r\n    errorMessage: ' ',\r\n  }\r\n  const franshisesIds = useSelector(state => selectFranshisesIds(state))\r\n  const [validate, setValidate] = useState(initialValidate)\r\n  useEffect(() => {\r\n    if (validate.errorMessage.length < 5 && form.phone.length > 7) {\r\n      dispatch(addObject({...form, userId}))\r\n      togglePopup()\r\n    }\r\n  }, [validate.errorMessage])\r\n  const [form, setForm] = useState({\r\n    name: '',\r\n    idFran: '',\r\n    orgOwner: '',\r\n    phone: '',\r\n    worker: '',\r\n  })\r\n  \r\n  const userId = localStorage.userId;\r\n  const handleValidate = () => {\r\n    if (!form.name.length || !form.idFran || !form.orgOwner.length || !form.phone.length || !form.worker.length) {\r\n      setValidate({errorMessage: 'error message', isValid: false})\r\n    }\r\n    else setValidate({isValid: true, errorMessage: '   '})\r\n    return validate.isValid\r\n  }\r\n \r\n\r\n  const onSubmit = (event) => {\r\n    event.preventDefault();\r\n    handleValidate();\r\n  };\r\n\r\n  return (\r\n    <div className={styles.popup_wrapper}>\r\n      <form className={styles.form} onSubmit={onSubmit}>\r\n        <h2 className={styles.title}>Добавление объекта</h2>\r\n        <button\r\n          type=\"button\"\r\n          className={classNames(styles.button, styles.popup_closeButton)}\r\n          onClick={() => togglePopup()}\r\n        />\r\n        <div className={styles.input_container}>\r\n          <input\r\n            autoComplete=\"new-password\"\r\n            id=\"name\"\r\n            type=\"text\"\r\n            className={styles.form_input}\r\n            required\r\n            placeholder=\" \"\r\n            value={form.name}\r\n            onChange={(event) => setForm({...form, name: event.target.value})}\r\n          />\r\n          <label htmlFor=\"name\" className={styles.form_label}>\r\n            Наименование\r\n          </label>\r\n        </div>\r\n        <div className={styles.input_container}>\r\n          <select\r\n          size={1}\r\n          defaultValue={1}\r\n            id=\"idFran\"\r\n            className={styles.form_input}\r\n            required\r\n            placeholder=\" \"\r\n            onChange={(event) => setForm({...form, idFran: event.target.value})}\r\n          >\r\n            {franshisesIds.map(id => <Option key={id} idFran={id} form={form} setForm={setForm}/>)}\r\n          </select>\r\n          <label htmlFor=\"idFran\" className={styles.form_label__select}>\r\n            Франшиза\r\n          </label>\r\n        </div>\r\n        <div className={styles.input_container}>\r\n          <input\r\n            autoComplete=\"new-password\"\r\n            id=\"orgOwner\"\r\n            type=\"text\"\r\n            className={styles.form_input}\r\n            required\r\n            placeholder=\" \"\r\n            value={form.orgOwner}\r\n            onChange={(event) => setForm({...form, orgOwner: event.target.value})}\r\n          />\r\n          <label htmlFor=\"orgOwner\" className={styles.form_label}>\r\n            Имя владельца\r\n          </label>\r\n        </div>\r\n        <div className={styles.input_container}>\r\n          <input\r\n            autoComplete=\"new-password\"\r\n            id=\"phone\"\r\n            type=\"text\"\r\n            className={styles.form_input}\r\n            required\r\n            placeholder=\" \"\r\n            value={form.phone}\r\n            onChange={(event) => setForm({...form, phone: event.target.value})}\r\n          />\r\n          <label htmlFor=\"phone\" className={styles.form_label}>\r\n            Телефон\r\n          </label>\r\n        </div>\r\n        <div className={styles.input_container}>\r\n          <input\r\n            autoComplete=\"new-password\"\r\n            id=\"worker\"\r\n            type=\"text\"\r\n            className={styles.form_input}\r\n            required\r\n            placeholder=\" \"\r\n            value={form.worker}\r\n            onChange={(event) => setForm({...form, worker: event.target.value})}\r\n          />\r\n          <label htmlFor=\"worker\" className={styles.form_label}>\r\n            Специалист\r\n          </label>\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className={classNames(styles.button, styles.form_submit)}\r\n        >\r\n          Добавить объект\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}