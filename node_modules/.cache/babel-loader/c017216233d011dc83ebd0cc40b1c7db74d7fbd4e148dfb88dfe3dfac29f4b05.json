{"ast":null,"code":"import _objectSpread from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"D:/dev/uno/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import classNames from\"classnames\";import{nanoid}from\"nanoid\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{selectObjectsIds,selectObjectsIsLoading}from\"../../store/Objects/selectors\";import{getObjects}from\"../../store/Objects/Thunks/getObjects\";import styles from\"./styles.module.css\";import{Object}from\"../Object/Object\";import{selectUserId}from\"../../store/Auth/selectors\";import{getPackagePrices}from\"../../store/ObjectPrices/Thunks/getPackagePrices\";import{getFransheses}from\"../../store/Franshises/Thunks/getFransheses\";import{ButtonBar}from\"../ButtonsBar/ButtonsBar\";import{AddObjectForm}from\"../AddObjectForm/AddObjectForm\";import{SearchBar}from\"../SearchBar/SearchBar\";import{ObjectDataContainer}from\"../../Containers/ObjectDataContainer/ObjectDataContainer\";import{useSingleEffect}from\"../../hooks/UseSingleEffect\";import{PopupContainer}from\"../../Containers/PopupContainer/PopupContainer\";import{OBJECT_HEADERS}from\"../../constants/Fixtires\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Objects=function Objects(){var dispatch=useDispatch();var isLoading=useSelector(function(state){return selectObjectsIsLoading(state);});var objectsIds=useSelector(function(state){return selectObjectsIds(state);});var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isRowSelected=_useState2[0],setIsRowSelected=_useState2[1];var _useState3=useState({name:\"\",city:\"\"}),_useState4=_slicedToArray(_useState3,2),filter=_useState4[0],setFilter=_useState4[1];var setName=function setName(e){setFilter(_objectSpread(_objectSpread({},filter),{},{name:e.target.value}));};// const setCity = (e) => {\n//   setFilter({...filter, city: e.target.value})\n// }\nvar userId=useSelector(function(state){return selectUserId(state);});var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isPopupOpened=_useState6[0],setIsPopupOpened=_useState6[1];useSingleEffect(function(){dispatch(getObjects({userId:userId}));dispatch(getPackagePrices);dispatch(getFransheses({userId:userId}));},[dispatch]);var togglePopup=function togglePopup(){setIsPopupOpened(!isPopupOpened);};if(localStorage.userId){userId=localStorage.userId;}if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:styles.objects_wrapper,children:[/*#__PURE__*/_jsxs(\"table\",{className:styles.table,children:[/*#__PURE__*/_jsx(\"thead\",{className:styles.table_header,children:/*#__PURE__*/_jsx(\"tr\",{className:styles.table_row,children:OBJECT_HEADERS.map(function(el){return/*#__PURE__*/_jsx(\"th\",{className:classNames(styles.table_cell,styles.table_cell__header),children:el===\"Название\"?/*#__PURE__*/_jsx(SearchBar,{filter:filter.name,handleSearch:setName,placeholder:el}):el},nanoid());})})}),/*#__PURE__*/_jsx(\"tbody\",{className:styles.table_content,children:objectsIds===null||objectsIds===void 0?void 0:objectsIds.map(function(id){return/*#__PURE__*/_jsx(ObjectDataContainer,{id:id,filter:filter,onclick:setIsRowSelected},id);})})]}),isRowSelected&&/*#__PURE__*/_jsx(Object,{toggleObject:setIsRowSelected,id:isRowSelected}),/*#__PURE__*/_jsx(ButtonBar,{onClicks:[togglePopup]}),isPopupOpened&&/*#__PURE__*/_jsx(PopupContainer,{togglePopup:togglePopup,children:/*#__PURE__*/_jsx(AddObjectForm,{togglePopup:togglePopup})})]});};","map":{"version":3,"names":["classNames","nanoid","useEffect","useState","useDispatch","useSelector","selectObjectsIds","selectObjectsIsLoading","getObjects","styles","Object","selectUserId","getPackagePrices","getFransheses","ButtonBar","AddObjectForm","SearchBar","ObjectDataContainer","useSingleEffect","PopupContainer","OBJECT_HEADERS","Objects","dispatch","isLoading","state","objectsIds","isRowSelected","setIsRowSelected","name","city","filter","setFilter","setName","e","target","value","userId","isPopupOpened","setIsPopupOpened","togglePopup","localStorage","objects_wrapper","table","table_header","table_row","map","el","table_cell","table_cell__header","table_content","id"],"sources":["D:/dev/uno/src/Components/Objects/Objects.js"],"sourcesContent":["import classNames from \"classnames\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  selectObjectsIds,\r\n  selectObjectsIsLoading,\r\n} from \"../../store/Objects/selectors\";\r\nimport { getObjects } from \"../../store/Objects/Thunks/getObjects\";\r\nimport styles from \"./styles.module.css\";\r\nimport { Object } from \"../Object/Object\";\r\nimport { selectUserId } from \"../../store/Auth/selectors\";\r\nimport { getPackagePrices } from \"../../store/ObjectPrices/Thunks/getPackagePrices\";\r\nimport { getFransheses } from \"../../store/Franshises/Thunks/getFransheses\";\r\nimport { ButtonBar } from \"../ButtonsBar/ButtonsBar\";\r\nimport { AddObjectForm } from \"../AddObjectForm/AddObjectForm\";\r\nimport { SearchBar } from \"../SearchBar/SearchBar\";\r\nimport { ObjectDataContainer } from \"../../Containers/ObjectDataContainer/ObjectDataContainer\";\r\nimport { useSingleEffect } from \"../../hooks/UseSingleEffect\";\r\nimport { PopupContainer } from \"../../Containers/PopupContainer/PopupContainer\";\r\nimport { OBJECT_HEADERS } from \"../../constants/Fixtires\";\r\n\r\nexport const Objects = () => {\r\n  const dispatch = useDispatch();\r\n  const isLoading = useSelector((state) => selectObjectsIsLoading(state));\r\n  const objectsIds = useSelector((state) => selectObjectsIds(state));\r\n  const [isRowSelected, setIsRowSelected] = useState(false);\r\n  const [filter, setFilter] = useState({ name: \"\", city: \"\" });\r\n  const setName = (e) => {\r\n    setFilter({ ...filter, name: e.target.value });\r\n  };\r\n  // const setCity = (e) => {\r\n  //   setFilter({...filter, city: e.target.value})\r\n  // }\r\n  let userId = useSelector((state) => selectUserId(state));\r\n  const [isPopupOpened, setIsPopupOpened] = useState(false);\r\n  useSingleEffect(() => {\r\n    dispatch(getObjects({ userId }));\r\n    dispatch(getPackagePrices);\r\n    dispatch(getFransheses({ userId }));\r\n  }, [dispatch]);\r\n  const togglePopup = () => {\r\n    setIsPopupOpened(!isPopupOpened);\r\n  };\r\n  if (localStorage.userId) {\r\n    userId = localStorage.userId;\r\n  }\r\n\r\n  if (isLoading) {\r\n    return <div>Loading...</div>;\r\n  }\r\n  return (\r\n    <div className={styles.objects_wrapper}>\r\n      <table className={styles.table}>\r\n        <thead className={styles.table_header}>\r\n          <tr className={styles.table_row}>\r\n            {OBJECT_HEADERS.map((el) => {\r\n              return (\r\n                <th\r\n                  key={nanoid()}\r\n                  className={classNames(\r\n                    styles.table_cell,\r\n                    styles.table_cell__header\r\n                  )}>\r\n                  {el === \"Название\" ? (\r\n                    <SearchBar\r\n                      filter={filter.name}\r\n                      handleSearch={setName}\r\n                      placeholder={el}\r\n                    />\r\n                  ) : (\r\n                    el\r\n                  )}\r\n                </th>\r\n              );\r\n            })}\r\n          </tr>\r\n        </thead>\r\n        <tbody className={styles.table_content}>\r\n          {objectsIds?.map((id) => (\r\n            <ObjectDataContainer\r\n              key={id}\r\n              id={id}\r\n              filter={filter}\r\n              onclick={setIsRowSelected}\r\n            />\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      {isRowSelected && (\r\n        <Object\r\n          toggleObject={setIsRowSelected}\r\n          id={isRowSelected}\r\n        />\r\n      )}\r\n      <ButtonBar onClicks={[togglePopup]} />\r\n      {isPopupOpened && (\r\n        <PopupContainer togglePopup={togglePopup}>\r\n          <AddObjectForm togglePopup={togglePopup} />\r\n        </PopupContainer>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}